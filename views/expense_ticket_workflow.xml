<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
<!--

Draft->Created->Department Head->CFO->Open->Cancel
  ^\_____________________|        |    \
   ^\_____________________________|     Paid

-->

    <record id="expense_ticket_wkf" model="workflow">
        <field name="name">expense.ticket.wkf</field>
        <field name="osv">lfx.expense.ticket</field>
        <field name="on_create">True</field>
    </record>
    <record id="act_draft" model="workflow.activity">
        <field name="wkf_id" ref="expense_ticket_wkf"/>
        <field name="flow_start">True</field>
        <field name="name">draft</field>
        <field name="action">wkf_draft()</field>
        <field name="kind">function</field>
    </record>
    <record id="act_create" model="workflow.activity">
        <field name="wkf_id" ref="expense_ticket_wkf"/>
        <field name="name">Create</field>
        <field name="action">wkf_create()</field>
        <field name="kind">function</field>
    </record>
    <record id="act_dh" model="workflow.activity">
        <field name="wkf_id" ref="expense_ticket_wkf"/>
        <field name="name">Department Head</field>
        <field name="action">wkf_dh()</field>
        <field name="kind">function</field>
    </record>
    <record id="act_cfo" model="workflow.activity">
        <field name="wkf_id" ref="expense_ticket_wkf"/>
        <field name="name">CFO</field>
        <field name="action">wkf_cfo()</field>
        <field name="kind">function</field>
    </record>
    <record id="act_open" model="workflow.activity">
        <field name="wkf_id" ref="expense_ticket_wkf"/>
        <field name="name">open</field>
        <field name="action">wkf_open()</field>
        <field name="kind">function</field>
    </record>
    <record id="act_paid" model="workflow.activity">
        <field name="wkf_id" ref="expense_ticket_wkf"/>
        <field name="name">paid</field>
        <field name="action">wkf_paid()</field>
        <field name="kind">function</field>
<!--        <field name="signal_send">subflow.paid</field> -->
    </record>
    <record id="act_cancel" model="workflow.activity">
        <field name="wkf_id" ref="expense_ticket_wkf"/>
        <field name="name">cancel</field>
        <field name="flow_stop">True</field>
        <field name="action">wkf_cancel()</field>
        <field name="kind">function</field>
    </record>
<!-- Draft -->
    <record id="draft_create" model="workflow.transition">
        <field name="act_from" ref="act_draft"/>
        <field name="act_to" ref="act_create"/>
        <field name="signal">expense_ticket_drafttocreate</field>
    </record>
    <record id="draft_cancel" model="workflow.transition">
        <field name="act_from" ref="act_draft"/>
        <field name="act_to" ref="act_cancel"/>
        <field name="signal">expense_ticket_drafttocancel</field>
    </record>
<!-- Create -->
    <record id="create_dh" model="workflow.transition">
        <field name="act_from" ref="act_create"/>
        <field name="act_to" ref="act_dh"/>
        <field name="signal">expense_ticket_createtodh</field>
    </record>
    <record id="create_draft" model="workflow.transition">
        <field name="act_from" ref="act_create"/>
        <field name="act_to" ref="act_draft"/>
        <field name="signal">expense_ticket_createtodraft</field>
    </record>
    <record id="create_cancel" model="workflow.transition">
        <field name="act_from" ref="act_create"/>
        <field name="act_to" ref="act_cancel"/>
        <field name="signal">expense_ticket_createtocancel</field>
    </record>
<!-- Department Head -->
    <record id="dh_cfo" model="workflow.transition">
        <field name="act_from" ref="act_dh"/>
        <field name="act_to" ref="act_cfo"/>
        <field name="signal">expense_ticket_dhtocfo</field>
    </record>
    <record id="dh_draft" model="workflow.transition">
        <field name="act_from" ref="act_dh"/>
        <field name="act_to" ref="act_draft"/>
        <field name="signal">expense_ticket_dhtodraft</field>
    </record>
<!-- CFO -->
    <record id="cfo_open" model="workflow.transition">
        <field name="act_from" ref="act_cfo"/>
        <field name="act_to" ref="act_open"/>
        <field name="signal">expense_ticket_cfotoopen</field>
    </record>
    <record id="cfo_draft" model="workflow.transition">
        <field name="act_from" ref="act_cfo"/>
        <field name="act_to" ref="act_draft"/>
        <field name="signal">expense_ticket_cfotodraft</field>
    </record>
<!-- Open -->
   <record id="open_paid" model="workflow.transition">
        <field name="act_from" ref="act_open"/>
        <field name="act_to" ref="act_paid"/>
        <field name="signal">expense_ticket_opentopaid</field>
    </record>
   <record id="open_cancel" model="workflow.transition">
        <field name="act_from" ref="act_open"/>
        <field name="act_to" ref="act_cancel"/>
        <field name="signal">expense_ticket_opentocancel</field>
    </record>
<!-- Paid -->
   <record id="paid_cancel" model="workflow.transition">
        <field name="act_from" ref="act_paid"/>
        <field name="act_to" ref="act_cancel"/>
        <field name="signal">expense_ticket_paidtocancel</field>
    </record>

</data>
</openerp>
